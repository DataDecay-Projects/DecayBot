<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard - Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- CoreUI CSS -->
    <link href="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.0.0/dist/css/coreui.min.css" rel="stylesheet" />

    <!-- CoreUI Icons -->
    <link href="https://cdn.jsdelivr.net/npm/@coreui/icons@3.0.0/css/all.min.css" rel="stylesheet" />

    <!-- Optional Bootstrap icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }

      .chat-box {
        height: 400px;
        overflow-y: auto;
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        padding: 0;
      }

      .chat-box li {
        list-style: none;
        padding: 0.5rem 1rem;
        border-bottom: 1px solid #dee2e6;
      }

      .chat-input {
        display: flex;
        gap: 0.5rem;
        margin-top: 1rem;
      }
    </style>
  </head>

  <body class="c-app">

    <!-- Sidebar -->
    <div class="sidebar sidebar-dark sidebar-fixed" id="sidebar">
      <div class="sidebar-brand d-none d-md-flex">
        <svg class="sidebar-brand-full" width="118" height="46">
          <text x="0" y="30" font-size="24" fill="white">Admin</text>
        </svg>
      </div>

      <ul class="sidebar-nav" data-coreui="navigation" data-simplebar>
        <li class="nav-item">
          <a class="nav-link active" href="#">
            <i class="nav-icon cil-chat-bubble"></i> Chat
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">
            <i class="nav-icon cil-people"></i> Users
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">
            <i class="nav-icon cil-settings"></i> Settings
          </a>
        </li>
      </ul>
      <button class="sidebar-toggler" type="button" data-coreui-toggle="unfoldable"></button>
    </div>

    <!-- Wrapper for main content -->
    <div class="wrapper d-flex flex-column min-vh-100 bg-light">

      <!-- Header -->
      <header class="header header-sticky mb-4">
        <div class="container-fluid">
          <button class="header-toggler px-md-0 me-md-3" type="button" onclick="coreui.Sidebar.getInstance(document.getElementById('sidebar')).toggle()">
            <i class="bi bi-list"></i>
          </button>
          <a class="header-brand d-md-none" href="#">Admin</a>
          <ul class="header-nav ms-auto">
            <li class="nav-item dropdown">
              <a class="nav-link py-0" data-coreui-toggle="dropdown" href="#" role="button">
                <div class="avatar avatar-md">
                  <img class="avatar-img" src="https://via.placeholder.com/40" alt="user" />
                </div>
              </a>
              <ul class="dropdown-menu dropdown-menu-end pt-0">
                <li><a class="dropdown-item" href="#">Profile</a></li>
                <li><a class="dropdown-item" href="#">Logout</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </header>

      <!-- Main Content -->
      <div class="body flex-grow-1 px-3">
        <div class="container-lg">
          <div class="row">
            <div class="col-12">
              <!-- Chat Card -->
              <div class="card">
                <div class="card-header">Admin Chat Console</div>
                <div class="card-body">
                  <ul id="messages" class="chat-box"></ul>
                  <form id="form" class="chat-input">
                    <input id="input" class="form-control" autocomplete="off" placeholder="Type a message..." />
                    <button class="btn btn-primary" type="submit">Send</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer class="footer">
        <div><a href="#">Admin Panel</a> Â© 2025</div>
      </footer>
    </div>

    <!-- CoreUI Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.0.0/dist/js/coreui.bundle.min.js"></script>

    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();

      const messages = document.getElementById('messages');
      const form = document.getElementById('form');
      const input = document.getElementById('input');

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        if (input.value.trim()) {
          socket.emit('send', input.value);
          input.value = '';
        }
      });

      socket.on('msg', function (msg) {
        const item = document.createElement('li');
        item.textContent = msg;
        messages.appendChild(item);
        messages.scrollTop = messages.scrollHeight;
      });
    </script>
  </body>
</html>
